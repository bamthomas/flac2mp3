This is a little repo with 2 utility scripts for transcoding flac files into mp3 files keeping covers, tags, and directory structure. It is multithreaded and creates as much thread as the number of cores on the host.

It works with linux, eyeD3, lame, flac, and metaflac.

Usage : 
flac2mp3 [origin directories] [mp3/repository/destination]

- If no argument is given, it will transcode flac files from current directory and put them in the same directory than the flac files.
- If one argument is given it is the destination : it will transcode flac files found under the current directory and put mp3 files in the destination directory with the same directory structure.
- If more than one argument is given, it will transcode flac files from the given directories to the destination.

for example, if you have :

/path/to/flac/artist1/album1/song1.flac
             |              |song2.flac
             |              |song3.flac
             |
             /artist2/album1/song1.flac
                            |song2.flac


1) if you do in flac directory :
$ flac2mp3.rb ../mp3

you'll have : 

/path/to/flac/artist1/album1/song1.flac
             |              |song2.flac
             |              |song3.flac
             |      
             /artist2/album1/song1.flac
                            |song2.flac
/path/to/mp3/artist1/album1/song1.mp3
            |              |song2.mp3
            |              |song3.mp3
            |
            /artist2/album1/song1.mp3
                           |song2.mp3

2) if you do in flac directory : 
$ flac2mp3.rb artist2 ../mp3

you'll have :

/path/to/flac/artist1/album1/song1.flac
             |              |song2.flac
             |              |song3.flac
             |
             /artist2/album1/song1.flac
                            |song2.flac
/path/to/mp3/artist2/album1/song1.mp3
                           |song2.mp3

This is a work in progress.

==========================
To develop and test, it is easier to run autotest : 
cf http://ph7spot.com/musings/getting-started-with-autotest

$ bash < <(curl -s https://rvm.beginrescueend.com/install/rvm)
$ source "$HOME/.rvm/scripts/rvm"
$ rvm install 1.8.7
$ rvmsudo gem install ZenTest
$ rvmsudo gem install autotest-rails
$ rvmsudo gem install redgreen

